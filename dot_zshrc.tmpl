# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# Theme
ZSH_THEME="powerlevel10k/powerlevel10k"

# Auto-update behavior: update automatically without asking
zstyle ':omz:update' mode auto

# Plugins
plugins=(git)

source $ZSH/oh-my-zsh.sh

# User configuration

# Preferred editor
export EDITOR='nvim'

# Git difftool
git config --global diff.tool vimdiff

# Add custom scripts and binaries to PATH
export PATH="$PATH:$HOME/.local/scripts:$HOME/.cargo/bin"

{{- if eq .chezmoi.osRelease.id "raspbian" }}
export PATH="$PATH:$HOME/.local/bin"
export PATH="$PATH:/snap/bin"
{{- end }}

{{- if eq .chezmoi.os "darwin" }} # macOS
export PATH="$PATH:/opt/homebrew/bin"
export PATH="/opt/homebrew/opt/openjdk@17/bin:$PATH"
{{- end }}

# Android SDK
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$ANDROID_HOME/emulator:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools:$PATH

# LM Studio CLI
export PATH="$PATH:/Users/jacsoncurtis/.lmstudio/bin"

# Keybinding for tmux-sessionizer script (Ctrl+F)
bindkey -s '^f' 'tmux-sessionizer\n'

# Aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

CDPATH=".:~"

# Load additional aliases if they exist
[[ -f ~/.aliases ]] && source ~/.aliases
[[ -f ~/.local_aliases ]] && source ~/.local_aliases

# NVM (Node Version Manager)
export NVM_DIR="$HOME/.nvm"
[[ -s "$NVM_DIR/nvm.sh" ]] && source "$NVM_DIR/nvm.sh"
[[ -s "$NVM_DIR/bash_completion" ]] && source "$NVM_DIR/bash_completion"

# Load Powerlevel10k config if available
[[ -f ~/.p10k.zsh ]] && source ~/.p10k.zsh

# Optional: Automatically start or attach to tmux on terminal start (commented out by default)
# if [[ -z "$TMUX" ]]; then
#   tmux attach || exec tmux new-session
#   exit
# fi

# Run neofetch on shell start
c;neofetch
